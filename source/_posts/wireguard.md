---
title: 两个openwrt路由器下异地组建wireguard内网
date: 2024-01-05 02:25:15
tags: [openwrt, wireguard,vpn]
---
已有以下A，B两个openwrt, 期望组建10.0.0.0/24网段内网:
OpenWrt路由器A IP：192.168.0.1, 10.0.0.1
OpenWrt路由器B IP：192.168.6.1, 10.0.0.2

### 首先，在两个openwrt路由器上上安装wireguard, 以下以A为例(B和A一样，只是把对应信息改为B的,只有个别不同)
如果没有安装wireguard要先安装wireguard, `系统` -> `软件包`，过滤器输入wireguard,选择luci-app-wireguard，点击对应安装, 成功后重启(一定要重启，否则下面接口选择协议的时候会找不到WireGuard VPN协议)

### `网络` -> `防火墙` , 添加，名称wg，下面的入站数据，出站数据，转发都选择允许, 下面允许转发到目标区域, 以及允许来自源区域的转发都选择lan. 保存


### 安装成功后要重启，然后`接口` -> `添加新接口`， 名称wg0, 协议选择WireGuard VPN, 点击创建接口，进入wg0配置界面，点击`生成新的密钥对`生成私钥和公钥(为方便后面配置可先记到记事本中),IP地址192.168.0.1/24,10.0.0.1/24(如果是B路由器则填写192.168.6.1/24,10.0.0.2/24). 然后切换到防火墙tab页，创建/分配防火墙区域选择wg，再切换到对端页添加对端,


